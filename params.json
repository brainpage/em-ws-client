{"name":"em-ws-client","body":"em-ws-client\r\n------------\r\nRFC 6455 Compliant WebSocket client for ruby.  See report for compliance: [View Autobahn Report][0]\r\n\r\nInstallation\r\n------------\r\n\r\n```bash\r\n$ gem install em-ws-client\r\n```\r\n\r\nSending and Receiving Messages\r\n------------------------------\r\n\r\n```ruby\r\nrequire \"em-ws-client\"\r\n\r\nEM.run do\r\n\r\n  # Establish the connection\r\n  ws = EM::WebSocketClient.new(\"ws://server/path\")\r\n\r\n  # Simple echo\r\n  # If the binary flag is set, then\r\n  # the message is a string encoded as ASCII_8BIT\r\n  # otherwise it's encoded as UTF-8\r\n  ws.onmessage do |msg, binary|\r\n    conn.send_message msg, binary\r\n  end\r\n\r\n  # Send a text message\r\n  ws.send_message \"hello!\"\r\n\r\n  # Send a binary message\r\n  ws.send_message [2,3,4].pack(\"NnC\"), true\r\n\r\nend\r\n```\r\n\r\nControl Events\r\n--------------\r\n\r\n```ruby\r\nrequire \"em-ws-client\"\r\n\r\nEM.run do\r\n\r\n  # Establish the connection\r\n  ws = EM::WebSocketClient.new(\"ws://server/path\")\r\n\r\n  ws.onopen do\r\n    # fire away\r\n  end\r\n\r\n  ws.onclose do |code, explain|\r\n    # could be good, or not\r\n  end\r\n\r\n  ws.onping do |msg|\r\n    # we automatically pong, but this is here\r\n  end\r\n\r\n  ws.onerror do |code, message|\r\n    # errors close the connection (per spec), but you can at\r\n    # least learn why with this\r\n  end\r\n\r\n  ws.ping \"ping\"\r\n\r\n  ws.onpong do |msg|\r\n    # mes -> what you called ping with\r\n  end\r\n\r\nend\r\n```\r\n\r\nStreaming API (Design Only)\r\n---------------------------\r\nThoughts appreciated.\r\n\r\n```ruby\r\n\r\n# streaming in\r\nws.onstream do |stream|\r\n  \r\n  # stream started\r\n  # stream.binary?\r\n\r\n  stream.ondata do |chunk|\r\n    # ...\r\n  end\r\n\r\n  stream.onclose do\r\n    # stream finished\r\n  end\r\nend\r\n\r\n# streaming out\r\nws.stream(true) do |stream|\r\n  100.times do |i|\r\n    stream << [i].pack(\"N\")\r\n  end\r\n  stream.close\r\nend\r\n\r\n```\r\n\r\n[0]: http://dansimpson.github.com/em-ws-client/autobahn/report.html","tagline":"RFC 6455 Compliant WebSocket client for ruby","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}